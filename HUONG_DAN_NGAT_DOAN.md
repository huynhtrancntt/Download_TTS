# ğŸµ HÆ°á»›ng dáº«n sá»­ dá»¥ng chá»©c nÄƒng Ngáº¯t Ä‘oáº¡n Audio (PhiÃªn báº£n má»›i)

## âœ‚ï¸ Tá»•ng quan

Chá»©c nÄƒng **Ngáº¯t Ä‘oáº¡n** Ä‘Ã£ Ä‘Æ°á»£c cáº£i tiáº¿n Ä‘á»ƒ Ä‘Æ¡n giáº£n hÃ³a vÃ  hiá»‡u quáº£ hÆ¡n. Thay vÃ¬ chia nhá» audio gá»‘c, chá»©c nÄƒng nÃ y giá» Ä‘Ã¢y:

- **Giá»¯ nguyÃªn audio gá»‘c**: KhÃ´ng chia nhá» hoáº·c thay Ä‘á»•i audio ban Ä‘áº§u
- **Táº¡o khoáº£ng nghá»‰ 3 giÃ¢y**: LuÃ´n táº¡o khoáº£ng nghá»‰ cá»‘ Ä‘á»‹nh 3 giÃ¢y
- **Há»— trá»£ thÃªm video**: CÃ³ thá»ƒ thÃªm video má»›i táº¡o audio 3 giÃ¢y
- **Báº£o toÃ n ná»™i dung**: Táº¥t cáº£ audio cÅ© Ä‘Æ°á»£c giá»¯ nguyÃªn

## ğŸš€ CÃ¡ch sá»­ dá»¥ng

### 1. Chuáº©n bá»‹
- **CÃ³ audio segments**: Báº¡n cáº§n cÃ³ Ã­t nháº¥t má»™t Ä‘oáº¡n audio (tá»« TTS hoáº·c thÃªm thá»§ cÃ´ng)
- **Audio player sáºµn sÃ ng**: Audio player pháº£i Ä‘Æ°á»£c khá»Ÿi táº¡o vÃ  cÃ³ thá»ƒ phÃ¡t

### 2. Ngáº¯t Ä‘oáº¡n Ä‘á»ƒ táº¡o khoáº£ng nghá»‰
1. **PhÃ¡t audio**: Sá»­ dá»¥ng nÃºt play/pause Ä‘á»ƒ di chuyá»ƒn Ä‘áº¿n vá»‹ trÃ­ cáº§n ngáº¯t Ä‘oáº¡n
   - **á» Äáº¦U segment**: Di chuyá»ƒn Ä‘áº¿n trong vÃ²ng 1 giÃ¢y Ä‘áº§u tiÃªn cá»§a segment â†’ Khoáº£ng nghá»‰ TRÆ¯á»šC segment
   - **á» CUá»I segment**: Di chuyá»ƒn Ä‘áº¿n trong vÃ²ng 1 giÃ¢y cuá»‘i cÃ¹ng cá»§a segment â†’ Khoáº£ng nghá»‰ SAU segment
   - **á» GIá»®A segment**: Di chuyá»ƒn Ä‘áº¿n vá»‹ trÃ­ báº¥t ká»³ trong segment â†’ Khoáº£ng nghá»‰ SAU segment hiá»‡n táº¡i
2. **Chá»n khoáº£ng nghá»‰**: Sá»­ dá»¥ng dropdown "Khoáº£ng:" Ä‘á»ƒ chá»n thá»i gian nghá»‰ (3s, 4s, 5s, 10s)
3. **Ngáº¯t Ä‘oáº¡n**: Báº¥m nÃºt **"âœ‚ï¸ Ngáº¯t Ä‘oáº¡n"** Ä‘á»ƒ thá»±c hiá»‡n
4. **XÃ¡c nháº­n**: Há»‡ thá»‘ng sáº½ hiá»ƒn thá»‹ dialog xÃ¡c nháº­n vá»›i thÃ´ng tin:
   - Vá»‹ trÃ­ ngáº¯t (thá»i gian hiá»‡n táº¡i)
   - TÃªn segment
   - Khoáº£ng nghá»‰ Ä‘Ã£ chá»n
   - Vá»‹ trÃ­ ngáº¯t (trÆ°á»›c hoáº·c sau segment)

### 3. ThÃªm video má»›i
1. **Báº¥m nÃºt "ğŸ¬ ThÃªm Video"**: Chá»n file video tá»« mÃ¡y tÃ­nh
2. **Há»— trá»£ Ä‘á»‹nh dáº¡ng**: MP4, AVI, MKV, MOV, WMV
3. **Tá»± Ä‘á»™ng táº¡o audio**: Video sáº½ táº¡o ra file Ã¢m thanh 3 giÃ¢y
4. **Giá»¯ nguyÃªn audio cÅ©**: Audio gá»‘c vÃ  khoáº£ng nghá»‰ khÃ´ng bá»‹ máº¥t

### 4. Káº¿t quáº£
Sau khi hoÃ n thÃ nh:
- **Audio gá»‘c**: ÄÆ°á»£c giá»¯ nguyÃªn hoÃ n toÃ n
- **Khoáº£ng nghá»‰**: ÄÆ°á»£c táº¡o theo vá»‹ trÃ­ Ä‘Ã£ chá»n:
  - **Náº¿u ngáº¯t á»Ÿ Äáº¦U segment**: Khoáº£ng nghá»‰ + Audio gá»‘c
  - **Náº¿u ngáº¯t á»Ÿ CUá»I hoáº·c GIá»®A segment**: Audio gá»‘c + Khoáº£ng nghá»‰
- **Video audio**: 3 giÃ¢y Ä‘Æ°á»£c táº¡o tá»« video má»›i
- **UI tá»± Ä‘á»™ng cáº­p nháº­t**: Danh sÃ¡ch segments hiá»ƒn thá»‹ cáº¥u trÃºc má»›i
- **Audio player**: ÄÆ°á»£c cáº­p nháº­t vá»›i cáº¥u trÃºc má»›i

## ğŸ“Š Hiá»ƒn thá»‹ káº¿t quáº£

### Trong danh sÃ¡ch segments:
- **Audio gá»‘c**: `[tÃªn gá»‘c]  â€”  [thá»i lÆ°á»£ng]`
- **Khoáº£ng nghá»‰**: `[KHOáº¢NG NGHá»ˆ 3s]  â€”  00:03`
- **Video audio**: `[tÃªn video]  â€”  00:03 (Video - 3s audio)`

### Thá»‘ng kÃª chi tiáº¿t:
Sá»­ dá»¥ng nÃºt **"â„¹ï¸ Info"** Ä‘á»ƒ xem:
- Tá»•ng sá»‘ segments
- Sá»‘ lÆ°á»£ng khoáº£ng nghá»‰
- Sá»‘ Ä‘oáº¡n video
- Thá»i lÆ°á»£ng tá»•ng cá»™ng

## ğŸ¯ Xuáº¥t file MP3

### Xá»­ lÃ½ thÃ´ng minh:
- **Khoáº£ng nghá»‰ tá»± Ä‘á»™ng**: Há»‡ thá»‘ng nháº­n diá»‡n vÃ  xá»­ lÃ½ cÃ¡c khoáº£ng nghá»‰ Ä‘Ã£ táº¡o
- **KhÃ´ng trÃ¹ng láº·p**: KhÃ´ng thÃªm gap thá»«a giá»¯a cÃ¡c khoáº£ng nghá»‰
- **ThÃ´ng bÃ¡o chi tiáº¿t**: Hiá»ƒn thá»‹ sá»‘ lÆ°á»£ng khoáº£ng nghá»‰ trong file xuáº¥t

### Quy trÃ¬nh xuáº¥t:
1. Báº¥m nÃºt **"ğŸ’¾ LÆ°u"**
2. Chá»n vá»‹ trÃ­ lÆ°u file MP3
3. Há»‡ thá»‘ng tá»± Ä‘á»™ng ghÃ©p cÃ¡c segments vá»›i khoáº£ng nghá»‰
4. File MP3 hoÃ n chá»‰nh Ä‘Æ°á»£c táº¡o

## âš ï¸ LÆ°u Ã½ quan trá»ng

### Äiá»u kiá»‡n ngáº¯t Ä‘oáº¡n:
- âœ… CÃ³ segments trong danh sÃ¡ch
- âœ… Vá»‹ trÃ­ ngáº¯t há»£p lá»‡ (Ä‘áº§u, cuá»‘i hoáº·c giá»¯a segment)
- âœ… Audio player sáºµn sÃ ng
- âŒ KhÃ´ng thá»ƒ ngáº¯t khi chÆ°a cÃ³ segments
- âœ… CÃ³ thá»ƒ ngáº¯t á»Ÿ báº¥t ká»³ vá»‹ trÃ­ nÃ o trong segment

### Giá»›i háº¡n ká»¹ thuáº­t:
- **Äá»‹nh dáº¡ng há»— trá»£**: MP3, WAV, M4A, OGG, FLAC (audio), MP4, AVI, MKV, MOV, WMV (video)
- **KÃ­ch thÆ°á»›c file**: Phá»¥ thuá»™c vÃ o RAM vÃ  dung lÆ°á»£ng á»• cá»©ng
- **Thá»i gian xá»­ lÃ½**: Phá»¥ thuá»™c vÃ o Ä‘á»™ dÃ i audio vÃ  hiá»‡u suáº¥t mÃ¡y

### Quáº£n lÃ½ file táº¡m:
- CÃ¡c file táº¡m Ä‘Æ°á»£c táº¡o trong `TEMP_DIR` tá»« config (máº·c Ä‘á»‹nh: `output/temp/`)
- Tá»± Ä‘á»™ng cleanup khi káº¿t thÃºc hoáº·c Ä‘Ã³ng á»©ng dá»¥ng
- CÃ³ thá»ƒ xÃ³a thá»§ cÃ´ng náº¿u cáº§n
- CÃ³ thá»ƒ cáº¥u hÃ¬nh Ä‘Æ°á»ng dáº«n trong `app/core/config.py`

## ğŸ”§ Xá»­ lÃ½ sá»± cá»‘

### Lá»—i thÆ°á»ng gáº·p:

1. **"KhÃ´ng tÃ¬m tháº¥y segment chá»©a vá»‹ trÃ­ hiá»‡n táº¡i"**
   - **NguyÃªn nhÃ¢n**: Vá»‹ trÃ­ Ä‘Ã£ chá»n khÃ´ng náº±m trong segment nÃ o
   - **Giáº£i phÃ¡p**: Di chuyá»ƒn Ä‘áº¿n vá»‹ trÃ­ khÃ¡c trong segment

2. **"KhÃ´ng thá»ƒ thÃªm file video"**
   - **NguyÃªn nhÃ¢n**: File video khÃ´ng há»— trá»£ hoáº·c bá»‹ há»ng
   - **Giáº£i phÃ¡p**: Kiá»ƒm tra Ä‘á»‹nh dáº¡ng file vÃ  thá»­ file khÃ¡c

### Kháº¯c phá»¥c nhanh:
- **Restart player**: Dá»«ng vÃ  phÃ¡t láº¡i audio
- **Reload segments**: Báº¥m "Káº¿t thÃºc" rá»“i "Báº¯t Ä‘áº§u" láº¡i
- **Kiá»ƒm tra file**: Äáº£m báº£o cÃ¡c file audio/video khÃ´ng bá»‹ há»ng

## ğŸ’¡ Máº¹o sá»­ dá»¥ng

### Tá»‘i Æ°u hÃ³a:
- **PhÃ¡t audio chÃ­nh xÃ¡c**: Sá»­ dá»¥ng nÃºt play/pause Ä‘á»ƒ di chuyá»ƒn Ä‘áº¿n vá»‹ trÃ­ cáº§n ngáº¯t Ä‘oáº¡n
- **Äáº§u segment**: Di chuyá»ƒn Ä‘áº¿n 1 giÃ¢y Ä‘áº§u tiÃªn Ä‘á»ƒ táº¡o khoáº£ng nghá»‰ TRÆ¯á»šC audio
- **Cuá»‘i segment**: Di chuyá»ƒn Ä‘áº¿n 1 giÃ¢y cuá»‘i cÃ¹ng Ä‘á»ƒ táº¡o khoáº£ng nghá»‰ SAU audio
- **Giá»¯a segment**: Di chuyá»ƒn Ä‘áº¿n vá»‹ trÃ­ báº¥t ká»³ Ä‘á»ƒ táº¡o khoáº£ng nghá»‰ SAU audio
- **Chá»n khoáº£ng nghá»‰ phÃ¹ há»£p**: 3s cho ná»™i dung ngáº¯n, 5-10s cho ná»™i dung quan trá»ng
- **ThÃªm video há»£p lÃ½**: Chá»n video phÃ¹ há»£p vá»›i ná»™i dung audio

### Workflow hiá»‡u quáº£:
1. **Táº¡o TTS** vá»›i vÄƒn báº£n hoÃ n chá»‰nh
2. **PhÃ¡t audio** Ä‘á»ƒ di chuyá»ƒn Ä‘áº¿n vá»‹ trÃ­ cáº§n ngáº¯t Ä‘oáº¡n
3. **Chá»n khoáº£ng nghá»‰** tá»« dropdown (3s, 4s, 5s, 10s)
4. **Báº¥m ngáº¯t Ä‘oáº¡n** Ä‘á»ƒ táº¡o khoáº£ng nghá»‰
5. **ThÃªm video** táº¡i cÃ¡c vá»‹ trÃ­ phÃ¹ há»£p
6. **Kiá»ƒm tra** káº¿t quáº£ báº±ng cÃ¡ch phÃ¡t láº¡i
7. **Xuáº¥t file** MP3 hoÃ n chá»‰nh

### Káº¿t há»£p vá»›i cÃ¡c tÃ­nh nÄƒng khÃ¡c:
- **ThÃªm audio thá»§ cÃ´ng**: Káº¿t há»£p vá»›i audio cÃ³ sáºµn
- **Sáº¯p xáº¿p segments**: Thay Ä‘á»•i thá»© tá»± sau khi ngáº¯t
- **Láº·p láº¡i**: Sá»­ dá»¥ng vá»›i cháº¿ Ä‘á»™ loop Ä‘á»ƒ kiá»ƒm tra

## ğŸ¬ TÃ­nh nÄƒng thÃªm Video

### Há»— trá»£ Ä‘á»‹nh dáº¡ng:
- **MP4**: Äá»‹nh dáº¡ng phá»• biáº¿n nháº¥t
- **AVI**: Äá»‹nh dáº¡ng cÅ© nhÆ°ng á»•n Ä‘á»‹nh
- **MKV**: Äá»‹nh dáº¡ng container má»Ÿ
- **MOV**: Äá»‹nh dáº¡ng cá»§a Apple
- **WMV**: Äá»‹nh dáº¡ng cá»§a Microsoft

### Xá»­ lÃ½ tá»± Ä‘á»™ng:
- **Táº¡o audio 3 giÃ¢y**: Má»—i video táº¡o ra audio 3 giÃ¢y cá»‘ Ä‘á»‹nh
- **Giá»¯ nguyÃªn audio cÅ©**: KhÃ´ng áº£nh hÆ°á»Ÿng Ä‘áº¿n segments hiá»‡n cÃ³
- **TÃ­ch há»£p hoÃ n háº£o**: Video Ä‘Æ°á»£c xá»­ lÃ½ nhÆ° segment audio bÃ¬nh thÆ°á»ng

### CÃ¡ch sá»­ dá»¥ng:
1. Báº¥m nÃºt **"ğŸ¬ ThÃªm Video"**
2. Chá»n file video tá»« mÃ¡y tÃ­nh
3. Há»‡ thá»‘ng tá»± Ä‘á»™ng táº¡o audio 3 giÃ¢y
4. Video xuáº¥t hiá»‡n trong danh sÃ¡ch segments
5. CÃ³ thá»ƒ phÃ¡t vÃ  xuáº¥t nhÆ° audio bÃ¬nh thÆ°á»ng

## ğŸ‰ Káº¿t luáº­n

Chá»©c nÄƒng **Ngáº¯t Ä‘oáº¡n Audio** Ä‘Ã£ Ä‘Æ°á»£c cáº£i tiáº¿n Ä‘Ã¡ng ká»ƒ vá»›i:

- **PhÃ¡t audio chÃ­nh xÃ¡c**: Sá»­ dá»¥ng nÃºt play/pause Ä‘á»ƒ di chuyá»ƒn Ä‘áº¿n vá»‹ trÃ­ cáº§n ngáº¯t Ä‘oáº¡n
- **Khoáº£ng nghá»‰ tÃ¹y chá»‰nh**: Chá»n tá»« dropdown (3s, 4s, 5s, 10s) theo nhu cáº§u
- **Giá»¯ nguyÃªn audio**: Audio gá»‘c khÃ´ng bá»‹ máº¥t khi ngáº¯t Ä‘oáº¡n
- **Há»— trá»£ video**: ThÃªm video má»›i táº¡o audio 3 giÃ¢y
- **TÃ­ch há»£p hoÃ n háº£o**: Hoáº¡t Ä‘á»™ng mÆ°á»£t mÃ  vá»›i cÃ¡c tÃ­nh nÄƒng hiá»‡n cÃ³

Chá»©c nÄƒng nÃ y má»Ÿ ra nhiá»u kháº£ nÄƒng má»›i cho viá»‡c táº¡o vÃ  chá»‰nh sá»­a audio, Ä‘áº·c biá»‡t há»¯u Ã­ch cho:
- Táº¡o bÃ i thuyáº¿t trÃ¬nh vá»›i khoáº£ng nghá»‰
- ThÃªm video vÃ o audio content
- Táº¡o cáº¥u trÃºc rÃµ rÃ ng cho audio
- Káº¿t há»£p nhiá»u loáº¡i media khÃ¡c nhau

HÃ£y thá»­ nghiá»‡m vÃ  khÃ¡m phÃ¡ cÃ¡c cÃ¡ch sá»­ dá»¥ng sÃ¡ng táº¡o cho chá»©c nÄƒng nÃ y!

---

**LÆ°u Ã½**: Chá»©c nÄƒng nÃ y yÃªu cáº§u FFmpeg Ä‘á»ƒ xá»­ lÃ½ audio. Äáº£m báº£o FFmpeg Ä‘Ã£ Ä‘Æ°á»£c cÃ i Ä‘áº·t vÃ  cáº¥u hÃ¬nh Ä‘Ãºng.
